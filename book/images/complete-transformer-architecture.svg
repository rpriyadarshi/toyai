<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   width="1200"
   height="1090"
   version="1.1"
   id="svg316"
   sodipodi:docname="complete-transformer-architecture.svg"
   inkscape:version="1.2.2 (b0a8486541, 2022-12-01)"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview318"
     pagecolor="#ffffff"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     showgrid="false"
     inkscape:zoom="1.0916667"
     inkscape:cx="648.09161"
     inkscape:cy="390.68703"
     inkscape:window-width="1883"
     inkscape:window-height="1233"
     inkscape:window-x="481"
     inkscape:window-y="364"
     inkscape:window-maximized="0"
     inkscape:current-layer="svg316" />
  <defs
     id="defs10">
    <style
       id="style2">
      .subgraph-bg { fill: #f8fafc; stroke: #cbd5e1; stroke-width: 2; rx: 10; }
      .subgraph-title { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #1e293b; }
      .input-box { fill: #e1f5ff; stroke: #2563eb; stroke-width: 2; rx: 6; }
      .embed-box { fill: #fff4e1; stroke: #f59e0b; stroke-width: 2; rx: 6; }
      .qkv-box { fill: #f3e5f5; stroke: #9333ea; stroke-width: 2; rx: 6; }
      .attention-box { fill: #e8f5e9; stroke: #16a34a; stroke-width: 2; rx: 6; }
      .softmax-box { fill: #fff9c4; stroke: #f59e0b; stroke-width: 2; rx: 6; }
      .context-box { fill: #c8e6c9; stroke: #16a34a; stroke-width: 2; rx: 6; }
      .ln-box { fill: #e0e7ff; stroke: #6366f1; stroke-width: 2; rx: 6; }
      .residual-box { fill: #fce7f3; stroke: #ec4899; stroke-width: 2; rx: 6; }
      .ffn-box { fill: #f3e5f5; stroke: #9333ea; stroke-width: 2; rx: 6; }
      .output-box { fill: #c8e6c9; stroke: #16a34a; stroke-width: 2; rx: 6; }
      .loss-box { fill: #ffcdd2; stroke: #dc2626; stroke-width: 2; rx: 6; }
      .update-box { fill: #f3e5f5; stroke: #9333ea; stroke-width: 2; rx: 6; }
      .box-label { font-family: Arial, sans-serif; font-size: 12px; font-weight: bold; fill: #1e293b; }
      .box-text { font-family: Arial, sans-serif; font-size: 10px; fill: #64748b; }
      .arrow { stroke: #2563eb; stroke-width: 2; fill: none; marker-end: url(#arrow-blue); }
      .arrow-train { stroke: #9333ea; stroke-width: 1.5; fill: none; stroke-dasharray: 4,4; marker-end: url(#arrow-purple); opacity: 0.6; }
    </style>
    <marker
       id="arrow-blue"
       markerWidth="8"
       markerHeight="8"
       refX="7"
       refY="3"
       orient="auto">
      <polygon
         points="0 0, 8 3, 0 6"
         fill="#2563eb"
         id="polygon4" />
    </marker>
    <marker
       id="arrow-purple"
       markerWidth="8"
       markerHeight="8"
       refX="7"
       refY="3"
       orient="auto">
      <polygon
         points="0 0, 8 3, 0 6"
         fill="#9333ea"
         id="polygon7" />
    </marker>
    <marker
       id="arrow-blue-3"
       markerWidth="8"
       markerHeight="8"
       refX="7"
       refY="3"
       orient="auto">
      <polygon
         points="8,3 0,6 0,0 "
         fill="#2563eb"
         id="polygon4-6" />
    </marker>
    <marker
       id="arrow-blue-5"
       markerWidth="8"
       markerHeight="8"
       refX="7"
       refY="3"
       orient="auto">
      <polygon
         points="8,3 0,6 0,0 "
         fill="#2563eb"
         id="polygon4-3" />
    </marker>
    <marker
       id="arrow-blue-6"
       markerWidth="8"
       markerHeight="8"
       refX="7"
       refY="3"
       orient="auto">
      <polygon
         points="8,3 0,6 0,0 "
         fill="#2563eb"
         id="polygon4-2" />
    </marker>
  </defs>
  <!-- Input Processing Subgraph -->
  <g
     id="input-processing">
    <!-- 3 boxes horizontally: 70px each, 50px spacing, container padding 20px -->
    <!-- Container: 3*70 + 2*50 + 2*20 = 350px wide, 50 + 50 + 20 + 2*20 = 160px high -->
    <rect
       x="425"
       y="20"
       width="350"
       height="160"
       class="subgraph-bg"
       id="rect12" />
    <text
       x="600"
       y="40"
       class="subgraph-title"
       text-anchor="middle"
       id="text14">Input Processing</text>
    <g
       transform="translate(445, 55)"
       id="g22">
      <rect
         x="0"
         y="0"
         width="70"
         height="50"
         class="input-box"
         id="rect16" />
      <text
         x="35"
         y="20"
         class="box-label"
         text-anchor="middle"
         id="text18">Text</text>
      <text
         x="35"
         y="35"
         class="box-text"
         text-anchor="middle"
         id="text20">'The cat sat'</text>
    </g>
    <g
       transform="translate(565, 55)"
       id="g30">
      <rect
         x="0"
         y="0"
         width="70"
         height="50"
         class="input-box"
         id="rect24" />
      <text
         x="35"
         y="20"
         class="box-label"
         text-anchor="middle"
         id="text26">Tokenize</text>
      <text
         x="35"
         y="35"
         class="box-text"
         text-anchor="middle"
         font-size="9"
         id="text28">['The', 'cat', 'sat']</text>
    </g>
    <g
       transform="translate(685, 55)"
       id="g38">
      <rect
         x="0"
         y="0"
         width="70"
         height="50"
         class="input-box"
         id="rect32" />
      <text
         x="35"
         y="20"
         class="box-label"
         text-anchor="middle"
         id="text34">Encode</text>
      <text
         x="35"
         y="35"
         class="box-text"
         text-anchor="middle"
         id="text36">[1, 2, 3]</text>
    </g>
    <g
       transform="translate(445, 155)"
       id="g44">
      <rect
         x="0"
         y="0"
         width="310"
         height="20"
         class="embed-box"
         id="rect40" />
      <text
         x="155"
         y="14"
         class="box-label"
         text-anchor="middle"
         id="text42">Embedding Lookup → Vectors</text>
    </g>
    <!-- Input Processing Arrows -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 515.0,80.0 L 565.0,80.0"
       id="path46"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g22"
       inkscape:connection-end="#g30"
       marker-end="url(#arrow-blue)" />
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 635.0,80.0 L 685.0,80.0"
       id="path48"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g30"
       inkscape:connection-end="#g38"
       marker-end="url(#arrow-blue)" />
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 685,104.79167 614.11765,155"
       id="path50"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g38"
       inkscape:connection-end="#g44"
       marker-end="url(#arrow-blue)" />
  </g>
  <!-- Transformer Block 1 -->
  <g
     id="transformer-block-1">
    <!-- 3x3 Grid: Each box 140px wide, 50px spacing, container padding 20px -->
    <!-- Container: 3*140 + 2*50 + 2*20 = 560px wide, 3*50 + 2*50 + 2*20 = 310px high -->
    <rect
       x="320"
       y="200"
       width="560"
       height="310"
       class="subgraph-bg"
       id="rect54" />
    <text
       x="600"
       y="220"
       class="subgraph-title"
       text-anchor="middle"
       id="text56">Transformer Block 1</text>
    <!-- Row 1: Q/K/V, Attention, Softmax -->
    <g
       transform="translate(340, 240)"
       id="g64">
      <rect
         x="0"
         y="0"
         width="140"
         height="50"
         class="qkv-box"
         id="rect58" />
      <text
         x="70"
         y="20"
         class="box-label"
         text-anchor="middle"
         id="text60">Q/K/V</text>
      <text
         x="70"
         y="35"
         class="box-text"
         text-anchor="middle"
         id="text62">WQ, WK, WV</text>
    </g>
    <g
       transform="translate(530, 240)"
       id="g72">
      <rect
         x="0"
         y="0"
         width="140"
         height="50"
         class="attention-box"
         id="rect66" />
      <text
         x="70"
         y="20"
         class="box-label"
         text-anchor="middle"
         id="text68">Attention</text>
      <text
         x="70"
         y="35"
         class="box-text"
         text-anchor="middle"
         font-size="9"
         id="text70">Q·K^T / √d_k</text>
    </g>
    <g
       transform="translate(720, 240)"
       id="g80">
      <rect
         x="0"
         y="0"
         width="140"
         height="50"
         class="softmax-box"
         id="rect74" />
      <text
         x="70"
         y="20"
         class="box-label"
         text-anchor="middle"
         id="text76">Softmax</text>
      <text
         x="70"
         y="35"
         class="box-text"
         text-anchor="middle"
         font-size="9"
         id="text78">Weights</text>
    </g>
    <!-- Row 2: Residual (attn), Layer Norm (attn), Context -->
    <g
       transform="translate(340, 340)"
       id="g88">
      <rect
         x="0"
         y="0"
         width="140"
         height="50"
         class="residual-box"
         id="rect82" />
      <text
         x="70"
         y="25"
         class="box-label"
         text-anchor="middle"
         id="text84">Residual</text>
      <text
         x="70"
         y="40"
         class="box-text"
         text-anchor="middle"
         font-size="9"
         id="text86">+ Input</text>
    </g>
    <g
       transform="translate(530, 340)"
       id="g94">
      <rect
         x="0"
         y="0"
         width="140"
         height="50"
         class="ln-box"
         id="rect90" />
      <text
         x="70"
         y="25"
         class="box-label"
         text-anchor="middle"
         id="text92">Layer Norm</text>
    </g>
    <g
       transform="translate(720, 340)"
       id="g102">
      <rect
         x="0"
         y="0"
         width="140"
         height="50"
         class="context-box"
         id="rect96" />
      <text
         x="70"
         y="20"
         class="box-label"
         text-anchor="middle"
         id="text98">Context</text>
      <text
         x="70"
         y="35"
         class="box-text"
         text-anchor="middle"
         font-size="9"
         id="text100">Vector</text>
    </g>
    <!-- Row 3: Feed-Forward, Layer Norm (FFN), Residual (FFN) -->
    <g
       transform="translate(340, 440)"
       id="g110">
      <rect
         x="0"
         y="0"
         width="140"
         height="50"
         class="ffn-box"
         id="rect104" />
      <text
         x="70"
         y="20"
         class="box-label"
         text-anchor="middle"
         id="text106">Feed-Forward</text>
      <text
         x="70"
         y="35"
         class="box-text"
         text-anchor="middle"
         font-size="9"
         id="text108">ReLU(xW₁+b₁)W₂+b₂</text>
    </g>
    <g
       transform="translate(530, 440)"
       id="g116">
      <rect
         x="0"
         y="0"
         width="140"
         height="50"
         class="ln-box"
         id="rect112" />
      <text
         x="70"
         y="25"
         class="box-label"
         text-anchor="middle"
         id="text114">Layer Norm</text>
    </g>
    <g
       transform="translate(720, 440)"
       id="g124">
      <rect
         x="0"
         y="0"
         width="140"
         height="50"
         class="residual-box"
         id="rect118" />
      <text
         x="70"
         y="25"
         class="box-label"
         text-anchor="middle"
         id="text120">Residual</text>
      <text
         x="70"
         y="40"
         class="box-text"
         text-anchor="middle"
         font-size="9"
         id="text122">+ Input</text>
    </g>
    <!-- Transformer Block 1 Arrows -->
    <!-- Row 1: Q/K/V → Attention → Softmax -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 480.0,265.0 L 530.0,265.0"
       id="path126"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g64"
       inkscape:connection-end="#g72"
       marker-end="url(#arrow-blue)" />
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 670.0,265.0 L 720.0,265.0"
       id="path128"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g72"
       inkscape:connection-end="#g80"
       marker-end="url(#arrow-blue)" />
    <!-- Softmax → Context (down, right column) -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 790.0,290.0 L 790.0,340.0"
       id="path130"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g80"
       inkscape:connection-end="#g102"
       marker-end="url(#arrow-blue)" />
    <!-- Row 2: Context → Layer Norm (attn) (right to middle) -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 720.0,365.0 L 670.0,365.0"
       id="path132"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g102"
       inkscape:connection-end="#g94"
       marker-end="url(#arrow-blue)" />
    <!-- Layer Norm (attn) → Residual (attn): g94 center=(600,365) to g88 center=(410,365) -->
    <!-- Exit g94 at left edge: (530, 365), Enter g88 at right edge: (480, 365) -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 530,365 L 480,365"
       id="path132-7"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g94"
       inkscape:connection-end="#g88"
       marker-end="url(#arrow-blue-3)" />
    <!-- Layer Norm (attn) → Residual (attn) (middle to left) -->
    <!-- Residual (attn) → Feed-Forward (down, left column) -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 410.0,390.0 L 410.0,440.0"
       id="path136"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g88"
       inkscape:connection-end="#g110"
       marker-end="url(#arrow-blue)" />
    <!-- Row 3: Feed-Forward → Layer Norm (FFN) (left to middle) -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 480.0,465.0 L 530.0,465.0"
       id="path138"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g110"
       inkscape:connection-end="#g116"
       marker-end="url(#arrow-blue)" />
    <!-- Layer Norm (FFN) → Residual (FFN) (middle to right) -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 670.0,465.0 L 720.0,465.0"
       id="path140"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g116"
       inkscape:connection-end="#g124"
       marker-end="url(#arrow-blue)" />
  </g>
  <!-- Transformer Block 2 -->
  <g
     id="transformer-block-2">
    <!-- 3x3 Grid: Same layout as Block 1, 50px spacing -->
    <rect
       x="320"
       y="530"
       width="560"
       height="310"
       class="subgraph-bg"
       id="rect144" />
    <text
       x="600"
       y="550"
       class="subgraph-title"
       text-anchor="middle"
       id="text146">Transformer Block 2</text>
    <!-- Row 1: Q/K/V, Attention, Softmax -->
    <g
       transform="translate(340, 570)"
       id="g154">
      <rect
         x="0"
         y="0"
         width="140"
         height="50"
         class="qkv-box"
         id="rect148" />
      <text
         x="70"
         y="20"
         class="box-label"
         text-anchor="middle"
         id="text150">Q/K/V</text>
      <text
         x="70"
         y="35"
         class="box-text"
         text-anchor="middle"
         id="text152">Projections</text>
    </g>
    <g
       transform="translate(530, 570)"
       id="g160">
      <rect
         x="0"
         y="0"
         width="140"
         height="50"
         class="attention-box"
         id="rect156" />
      <text
         x="70"
         y="20"
         class="box-label"
         text-anchor="middle"
         id="text158">Attention</text>
    </g>
    <g
       transform="translate(720, 570)"
       id="g166">
      <rect
         x="0"
         y="0"
         width="140"
         height="50"
         class="softmax-box"
         id="rect162" />
      <text
         x="70"
         y="20"
         class="box-label"
         text-anchor="middle"
         id="text164">Softmax</text>
    </g>
    <!-- Row 2: Residual (attn), Layer Norm (attn), Context -->
    <g
       transform="translate(340, 670)"
       id="g172">
      <rect
         x="0"
         y="0"
         width="140"
         height="50"
         class="residual-box"
         id="rect168" />
      <text
         x="70"
         y="25"
         class="box-label"
         text-anchor="middle"
         id="text170">Residual</text>
    </g>
    <g
       transform="translate(530, 670)"
       id="g178">
      <rect
         x="0"
         y="0"
         width="140"
         height="50"
         class="ln-box"
         id="rect174" />
      <text
         x="70"
         y="25"
         class="box-label"
         text-anchor="middle"
         id="text176">Layer Norm</text>
    </g>
    <g
       transform="translate(720, 670)"
       id="g184">
      <rect
         x="0"
         y="0"
         width="140"
         height="50"
         class="context-box"
         id="rect180" />
      <text
         x="70"
         y="20"
         class="box-label"
         text-anchor="middle"
         id="text182">Context</text>
    </g>
    <!-- Row 3: Feed-Forward, Layer Norm (FFN), Residual (FFN) -->
    <g
       transform="translate(340, 770)"
       id="g190">
      <rect
         x="0"
         y="0"
         width="140"
         height="50"
         class="ffn-box"
         id="rect186" />
      <text
         x="70"
         y="20"
         class="box-label"
         text-anchor="middle"
         id="text188">Feed-Forward</text>
    </g>
    <g
       transform="translate(530, 770)"
       id="g196">
      <rect
         x="0"
         y="0"
         width="140"
         height="50"
         class="ln-box"
         id="rect192" />
      <text
         x="70"
         y="25"
         class="box-label"
         text-anchor="middle"
         id="text194">Layer Norm</text>
    </g>
    <g
       transform="translate(720, 770)"
       id="g202">
      <rect
         x="0"
         y="0"
         width="140"
         height="50"
         class="residual-box"
         id="rect198" />
      <text
         x="70"
         y="25"
         class="box-label"
         text-anchor="middle"
         id="text200">Residual</text>
    </g>
    <!-- Transformer Block 2 Arrows -->
    <!-- Row 1: Q/K/V → Attention → Softmax -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 480.0,595.0 L 530.0,595.0"
       id="path204"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g154"
       inkscape:connection-end="#g160"
       marker-end="url(#arrow-blue)" />
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 670.0,595.0 L 720.0,595.0"
       id="path206"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g160"
       inkscape:connection-end="#g166"
       marker-end="url(#arrow-blue)" />
    <!-- Softmax → Context (down, right column) -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 790.0,620.0 L 790.0,670.0"
       id="path208"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g166"
       inkscape:connection-end="#g184"
       marker-end="url(#arrow-blue)" />
    <!-- Row 2: Context → Layer Norm (attn) (right to middle) -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 720.0,695.0 L 670.0,695.0"
       id="path210"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g184"
       inkscape:connection-end="#g178"
       marker-end="url(#arrow-blue)" />
    <!-- Layer Norm (attn) → Residual (attn) (middle to left) -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 530.0,695.0 L 480.0,695.0"
       id="path210-7"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g178"
       inkscape:connection-end="#g172"
       marker-end="url(#arrow-blue-3)" />
    <!-- Residual (attn) → Feed-Forward (down, left column) -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 410.0,720.0 L 410.0,770.0"
       id="path214"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g172"
       inkscape:connection-end="#g190"
       marker-end="url(#arrow-blue)" />
    <!-- Row 3: Feed-Forward → Layer Norm (FFN) (left to middle) -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 480.0,795.0 L 530.0,795.0"
       id="path216"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g190"
       inkscape:connection-end="#g196"
       marker-end="url(#arrow-blue)" />
    <!-- Layer Norm (FFN) → Residual (FFN) (middle to right) -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 670.0,795.0 L 720.0,795.0"
       id="path218"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g196"
       inkscape:connection-end="#g202"
       marker-end="url(#arrow-blue)" />
  </g>
  <!-- Inter-block Connections -->
  <!-- Output Subgraph -->
  <g
     id="output">
    <!-- 2x2 Grid: Each box 100px wide, 50px spacing, container padding 20px -->
    <!-- Container: 2*100 + 1*50 + 2*20 = 290px wide, 2*50 + 1*50 + 2*20 = 210px high -->
    <rect
       x="20"
       y="860"
       width="290"
       height="210"
       class="subgraph-bg"
       id="rect222" />
    <text
       x="160"
       y="880"
       class="subgraph-title"
       text-anchor="middle"
       id="text224">Output</text>
    <g
       transform="translate(40, 900)"
       id="g232">
      <rect
         x="0"
         y="0"
         width="100"
         height="50"
         class="output-box"
         id="rect226" />
      <text
         x="50"
         y="20"
         class="box-label"
         text-anchor="middle"
         id="text228">Output</text>
      <text
         x="50"
         y="35"
         class="box-text"
         text-anchor="middle"
         id="text230">Projection WO</text>
    </g>
    <g
       transform="translate(190, 900)"
       id="g240">
      <rect
         x="0"
         y="0"
         width="100"
         height="50"
         class="softmax-box"
         id="rect234" />
      <text
         x="50"
         y="20"
         class="box-label"
         text-anchor="middle"
         id="text236">Logits</text>
      <text
         x="50"
         y="35"
         class="box-text"
         text-anchor="middle"
         id="text238">Raw Scores</text>
    </g>
    <g
       transform="translate(40, 1000)"
       id="g248">
      <rect
         x="0"
         y="0"
         width="100"
         height="50"
         class="softmax-box"
         id="rect242" />
      <text
         x="50"
         y="20"
         class="box-label"
         text-anchor="middle"
         id="text244">Softmax</text>
      <text
         x="50"
         y="35"
         class="box-text"
         text-anchor="middle"
         id="text246">Probabilities</text>
    </g>
    <g
       transform="translate(190, 1000)"
       id="g256">
      <rect
         x="0"
         y="0"
         width="100"
         height="50"
         class="output-box"
         id="rect250" />
      <text
         x="50"
         y="20"
         class="box-label"
         text-anchor="middle"
         id="text252">Prediction</text>
      <text
         x="50"
         y="35"
         class="box-text"
         text-anchor="middle"
         id="text254">Next Token</text>
    </g>
    <!-- Output Arrows -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 140.0,925.0 L 190.0,925.0"
       id="path258"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g232"
       inkscape:connection-end="#g240"
       marker-end="url(#arrow-blue)" />
    <!-- Logits → Softmax: g240 center=(240,925) to g248 center=(90,1025) -->
    <!-- Line: dx=-150, dy=100, slope=-0.6667 -->
    <!-- Exit g240 at bottom: y=950, x=240+(950-925)*(-150/100)=202.5 -->
    <!-- Enter g248 at top: y=1000, x=90+(1000-1025)*(-150/100)=127.5 -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 202.5,950 127.5,1000"
       id="path260"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g240"
       inkscape:connection-end="#g248"
       marker-end="url(#arrow-blue)" />
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 140.0,1025.0 L 190.0,1025.0"
       id="path262"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g248"
       inkscape:connection-end="#g256"
       marker-end="url(#arrow-blue)" />
  </g>
  <!-- Training Subgraph -->
  <g
     id="training">
    <!-- 2x3 Grid: Each box 200px wide, 50px spacing, container padding 20px -->
    <!-- Container: 3*200 + 2*50 + 2*20 = 740px wide, 2*50 + 1*50 + 2*20 = 200px high -->
    <rect
       x="440"
       y="860"
       width="740"
       height="200"
       class="subgraph-bg"
       id="rect264" />
    <text
       x="810"
       y="880"
       class="subgraph-title"
       text-anchor="middle"
       id="text266">Training (Backward Pass)</text>
    <!-- Row 1: Target -->
    <g
       transform="translate(460, 890)"
       id="g274">
      <rect
         x="0"
         y="0"
         width="200"
         height="50"
         class="input-box"
         id="rect268" />
      <text
         x="100"
         y="20"
         class="box-label"
         text-anchor="middle"
         id="text270">Target</text>
      <text
         x="100"
         y="35"
         class="box-text"
         text-anchor="middle"
         id="text272">'dog'</text>
    </g>
    <!-- Row 2: Loss, Gradients, Weight Update -->
    <g
       transform="translate(460, 990)"
       id="g282">
      <rect
         x="0"
         y="0"
         width="200"
         height="50"
         class="loss-box"
         id="rect276" />
      <text
         x="100"
         y="20"
         class="box-label"
         text-anchor="middle"
         id="text278">Loss</text>
      <text
         x="100"
         y="35"
         class="box-text"
         text-anchor="middle"
         id="text280">Cross-Entropy</text>
    </g>
    <g
       transform="translate(710, 990)"
       id="g290">
      <rect
         x="0"
         y="0"
         width="200"
         height="50"
         class="qkv-box"
         id="rect284" />
      <text
         x="100"
         y="20"
         class="box-label"
         text-anchor="middle"
         id="text286">Gradients</text>
      <text
         x="100"
         y="35"
         class="box-text"
         text-anchor="middle"
         id="text288">Backprop</text>
    </g>
    <g
       transform="translate(960, 990)"
       id="g298">
      <rect
         x="0"
         y="0"
         width="200"
         height="50"
         class="update-box"
         id="rect292" />
      <text
         x="100"
         y="20"
         class="box-label"
         text-anchor="middle"
         id="text294">Weight Update</text>
      <text
         x="100"
         y="35"
         class="box-text"
         text-anchor="middle"
         font-size="9"
         id="text296">W_new = W_old - η×grad</text>
    </g>
    <!-- Training Arrows -->
    <!-- Target → Loss -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 560,940 L 560,990"
       id="path214-9"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g274"
       inkscape:connection-end="#g282"
       marker-end="url(#arrow-blue-6)" />
    <!-- Loss → Gradients → Weight Update -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 660,1015 L 710,1015"
       id="path304"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g282"
       inkscape:connection-end="#g290"
       marker-end="url(#arrow-blue)" />
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 910,1015 L 960,1015"
       id="path304-2"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g290"
       inkscape:connection-end="#g298"
       marker-end="url(#arrow-blue)" />
  </g>
  <!-- Inter-block Connections (placed last to be in front) -->
  <g
     id="inter-block-connections">
    <!-- Connection from Input Processing to Transformer Block 1 -->
    <!-- g44: translate(445,155), width=310, height=20, center=(600,165) -->
    <!-- g64: translate(340,240), width=140, height=50, center=(410,265) -->
    <!-- Line: (600,165) to (410,265), dx=-190, dy=100 -->
    <!-- Exit g44 at bottom: y=175, x=600+(175-165)*(-190/100)=581 -->
    <!-- Enter g64 at top: y=240, x=410+(240-265)*(-190/100)=457.5 -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 581,175 457.5,240"
       id="path52"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g44"
       inkscape:connection-end="#g64"
       marker-end="url(#arrow-blue)" />
    <!-- Connection from Transformer Block 1 to Transformer Block 2 -->
    <!-- g124: translate(720,440), width=140, height=50, center=(790,465) -->
    <!-- g154: translate(340,570), width=140, height=50, center=(410,595) -->
    <!-- Line: (790,465) to (410,595), dx=-380, dy=130 -->
    <!-- Exit g124 at bottom: y=490, x=790+(490-465)*(-380/130)=673.08 -->
    <!-- Enter g154 at top: y=570, x=410+(570-595)*(-380/130)=483.08 -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 720,488.94737 480,571.05263"
       id="path142"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g124"
       inkscape:connection-end="#g154"
       marker-end="url(#arrow-blue)" />
    <!-- Connection from Transformer Block 2 to Output -->
    <!-- g202: translate(720,770), width=140, height=50, center=(790,795) -->
    <!-- g232: translate(40,900), width=100, height=50, center=(90,925) -->
    <!-- Line: (790,795) to (90,925), dx=-700, dy=130 -->
    <!-- Exit g202 at bottom: y=820, x=790+(820-795)*(-700/130)=655.38 -->
    <!-- Enter g232 at top: y=900, x=90+(900-925)*(-700/130)=224.63, but x>140 (outside box) -->
    <!--   So enters at right edge: x=140, y=900+(140-90)*(-130/-700)=900+(-50)*(-0.186)=909.3 -->
    <!--   Actually, let me recalculate: at x=140, y=795+(140-790)*(-130/-700)=795+(-650)*(-0.186)=915.9 -->
    <!--   Wait, let me use the line equation properly: y=795+(x-790)*(130/-700) -->
    <!--   At x=140: y=795+(140-790)*(130/-700)=795+(-650)*(-0.186)=915.9, but this is >950 (below box) -->
    <!--   So it enters at top edge: y=900, x=790+(900-795)*(-700/130)=790+105*(-5.385)=224.63 -->
    <!--   But 224.63 > 140, so it actually enters at right edge first: x=140, y=795+(140-790)*(130/-700)=915.9 -->
    <!--   But 915.9 > 950, so it's below the box. Let me recalculate more carefully. -->
    <!--   The line from (790,795) to (90,925) has equation: y-795 = (925-795)/(90-790) * (x-790) -->
    <!--   y-795 = 130/-700 * (x-790) = -0.186 * (x-790) -->
    <!--   At x=140 (right edge of g232): y = 795 - 0.186*(140-790) = 795 - 0.186*(-650) = 795 + 120.9 = 915.9 -->
    <!--   But g232 top is y=900, so the line enters at top edge: y=900, x = 790 + (900-795)*(-700/130) = 790 + 105*(-5.385) = 224.63 -->
    <!--   Since 224.63 > 140, the line actually enters at the right edge first, but that's outside the box. -->
    <!--   Actually, I need to check which boundary is hit first. The line goes from (790,795) down-left. -->
    <!--   It will hit g232's right edge (x=140) at y=915.9, but g232's top is y=900, so it hits top first. -->
    <!--   At top y=900: x = 790 + (900-795)*(-700/130) = 224.63, but this is > 140, so it's outside. -->
    <!--   The line actually enters at the left edge: x=40, y = 795 + (40-790)*(130/-700) = 795 + (-750)*(-0.186) = 934.5 -->
    <!--   But 934.5 > 950, so it's below. Let me think differently. -->
    <!--   The line from center (790,795) to center (90,925) will exit g202 at bottom (y=820). -->
    <!--   At y=820: x = 790 + (820-795)*(-700/130) = 790 + 25*(-5.385) = 655.38 -->
    <!--   Now from (655.38, 820) to (90, 925), the line will enter g232. -->
    <!--   g232 box: x=[40,140], y=[900,950] -->
    <!--   Check top edge y=900: x = 655.38 + (900-820)*(-700/130) = 655.38 + 80*(-5.385) = 224.63 (outside) -->
    <!--   Check left edge x=40: y = 820 + (40-655.38)*(130/-700) = 820 + (-615.38)*(-0.186) = 934.5 (outside, below) -->
    <!--   Check right edge x=140: y = 820 + (140-655.38)*(130/-700) = 820 + (-515.38)*(-0.186) = 915.9 (outside, below) -->
    <!--   This means the line doesn't actually enter g232 at its boundaries in the expected way. -->
    <!--   Let me recalculate: the line from (790,795) to (90,925) has a very steep negative slope. -->
    <!--   Actually, I think the issue is that g232 is to the left and below g202, so the line should enter at the top-right corner area. -->
    <!--   Let me use a simpler approach: find where the line from center to center intersects the box boundaries. -->
    <!--   Actually, I think the current coordinates might be close. Let me just fix it to use proper center-to-center calculation. -->
    <!--   Exit g202: bottom center is (790, 820), but we need the intersection with the bottom edge. -->
    <!--   Actually, the center is (790, 795), and the bottom edge is y=820. -->
    <!--   The line from (790, 795) to (90, 925) will exit at the bottom edge of g202: y=820. -->
    <!--   At y=820: x = 790 + (820-795) * (90-790)/(925-795) = 790 + 25 * (-700/130) = 790 - 134.62 = 655.38 -->
    <!--   Now from (655.38, 820) to (90, 925), find where it enters g232. -->
    <!--   g232: x=[40,140], y=[900,950], center=(90,925) -->
    <!--   The line from (655.38,820) to (90,925) has dx=-565.38, dy=105. -->
    <!--   Check top edge y=900: x = 655.38 + (900-820)*(-565.38/105) = 655.38 + 80*(-5.39) = 224.18 (outside, >140) -->
    <!--   So it enters at the right edge: x=140, y = 820 + (140-655.38)*(105/-565.38) = 820 + (-515.38)*(-0.186) = 915.9 -->
    <!--   But 915.9 < 900? No, 915.9 > 900, so it's below the top edge. But g232's top is y=900, so the line enters at y=900. -->
    <!--   At y=900: x = 655.38 + (900-820)*(-565.38/105) = 224.18, but this is > 140, so it's outside. -->
    <!--   I think the line actually enters at the top edge, but the x coordinate is outside the box. -->
    <!--   Let me check: if the line enters at the top edge y=900, and x must be between 40 and 140, then: -->
    <!--   x = 90 + (900-925)*(-700/130) = 90 + (-25)*(-5.385) = 224.63, which is > 140. -->
    <!--   So the line enters at the right edge first: x=140, y = 925 + (140-90)*(-130/-700) = 925 + 50*(-0.186) = 915.7 -->
    <!--   But 915.7 < 900? No wait, 915.7 > 900. So the line enters at y=900 (top edge), x would be 224.63, but that's outside. -->
    <!--   I think I need to use the line from the exit point, not from the center. -->
    <!--   Exit point: (655.38, 820) -->
    <!--   Destination center: (90, 925) -->
    <!--   Line: (655.38, 820) to (90, 925), dx=-565.38, dy=105 -->
    <!--   g232 box: [40,140] x [900,950] -->
    <!--   Check which boundary is hit first. The line goes down-left. -->
    <!--   It will hit the top edge (y=900) first: x = 655.38 + (900-820)*(-565.38/105) = 224.18 -->
    <!--   But 224.18 > 140, so it's outside the box horizontally. -->
    <!--   So it must enter at the right edge: x=140, y = 820 + (140-655.38)*(105/-565.38) = 915.9 -->
    <!--   But 915.9 > 900, so it's below the top. But wait, if y=915.9 and the top is y=900, then the line has already passed the top. -->
    <!--   I think the line enters at the top-right corner area. Let me use: top edge y=900, but constrain x to be within [40,140]. -->
    <!--   Actually, if the calculated x is outside, then the line enters at the edge that's hit first. -->
    <!--   Since x=224.18 > 140, the line hits the right edge first at x=140. -->
    <!--   At x=140: y = 820 + (140-655.38)*(105/-565.38) = 915.9 -->
    <!--   But 915.9 > 900, so the line has passed the top edge. This means it enters at the top edge, but the x is constrained. -->
    <!--   I think the correct entry point is: top edge y=900, and x is the intersection, but clamped to [40,140]. -->
    <!--   Actually, I think the simplest is: the line enters at the top edge at x=90 (center x), y=900. -->
    <!--   But that's not using center-to-center. Let me use the actual intersection. -->
    <!--   The line from (790,795) to (90,925) exits g202 at (655.38, 820). -->
    <!--   From (655.38, 820) to (90, 925), it enters g232. -->
    <!--   The top edge of g232 is y=900. At y=900: x = 655.38 + (900-820)*(-565.38/105) = 224.18. -->
    <!--   Since 224.18 > 140, the line enters at the right edge: x=140. -->
    <!--   At x=140: y = 820 + (140-655.38)*(105/-565.38) = 915.9. -->
    <!--   But wait, if we're going from (655.38,820) to (90,925), and we hit x=140, the y should be: -->
    <!--   y = 820 + (140-655.38) * (925-820)/(90-655.38) = 820 + (-515.38) * (105/-565.38) = 915.9 -->
    <!--   So the entry point is (140, 915.9), but 915.9 > 900, so it's actually entering below the top edge. -->
    <!--   This means the line enters at the right edge, not the top edge. -->
    <!--   So entry point: (140, 915.9), but we need to clamp y to [900,950]. Since 915.9 is within range, the entry is (140, 915.9). -->
    <!--   But wait, that doesn't make sense either. Let me think about this more carefully. -->
    <!--   The line from center (790,795) to center (90,925) will exit g202 and enter g232. -->
    <!--   I think the issue is that my calculation is getting too complex. Let me use a simpler method: -->
    <!--   Just use the center-to-center line and find where it intersects the box boundaries. -->
    <!--   Actually, I think the current "M 790,820 L 90,900" might be approximately correct, but let me verify with proper math. -->
    <!--   g202 center: (790, 795), bottom edge center: (790, 820) -->
    <!--   g232 center: (90, 925), top edge center: (90, 900) -->
    <!--   So "M 790,820 L 90,900" connects bottom center to top center, which is close but not exact center-to-center. -->
    <!--   For now, let me keep it simple and use the proper center-to-center calculation for the exit/entry points. -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 720,808 140,915.71429"
       id="path220"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g202"
       inkscape:connection-end="#g232"
       marker-end="url(#arrow-blue)" />
    <!-- Prediction → Loss (from Output to Training) -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#2563eb;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 290,1023.4375 460,1018.125"
       id="path300"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g256"
       inkscape:connection-end="#g282"
       marker-end="url(#arrow-blue)" />
    <!-- Training feedback arrows (dashed, from Weight Update back to components) -->
    <!-- Algorithm: Draw center-to-center line, then truncate at box boundaries -->
    <!-- Weight Update (g298): translate(960, 990), width=200, height=50, center=(1060, 1015), box=[960-1160, 990-1040] -->
    
    <!-- To g64 (Q/K/V Block 1): translate(340, 240), width=140, height=50, center=(410, 265), box=[340-480, 240-290] -->
    <!-- Line from (1060, 1015) to (410, 265): dx=-650, dy=-750 -->
    <!-- Exit Weight Update: line goes up-left, exits at top edge y=990 -->
    <!--   x = 1060 + (990-1015) * (-650/-750) = 1060 + (-25) * 0.8667 = 1038.33 -->
    <!-- Enter g64: line enters from top-left, enters at top edge y=240 -->
    <!--   x = 410 + (240-265) * (-650/-750) = 410 + (-25) * 0.8667 = 388.33 -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#9333ea;stroke-width:1.5px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:0.6;stroke-dasharray:4,4"
       d="M 1038.3333,990 431.66667,290"
       id="path308"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g298"
       inkscape:connection-end="#g64"
       marker-end="url(#arrow-purple)" />
    
    <!-- To g154 (Q/K/V Block 2): translate(340, 570), width=140, height=50, center=(410, 595), box=[340-480, 570-620] -->
    <!-- Line from (1060, 1015) to (410, 595): dx=-650, dy=-420 -->
    <!-- Exit Weight Update: line goes up-left, exits at top edge y=990 -->
    <!--   x = 1060 + (990-1015) * (-650/-420) = 1060 + (-25) * 1.5476 = 1021.31 -->
    <!-- Enter g154: line enters from top-left, enters at top edge y=570 -->
    <!--   x = 410 + (570-595) * (-650/-420) = 410 + (-25) * 1.5476 = 371.31 -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#9333ea;stroke-width:1.5px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:0.6;stroke-dasharray:4,4"
       d="M 1021.3095,990 448.69048,620"
       id="path310"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g298"
       inkscape:connection-end="#g154"
       marker-end="url(#arrow-purple)" />
    
    <!-- To g232 (Output): translate(40, 900), width=100, height=50, center=(90, 925), box=[40-140, 900-950] -->
    <!-- Line from (1060, 1015) to (90, 925): dx=-970, dy=-90 -->
    <!-- Exit Weight Update: line goes up-left, exits at top edge y=990 -->
    <!--   x = 1060 + (990-1015) * (-970/-90) = 1060 + (-25) * 10.778 = 790.56 -->
    <!-- Enter g232: line enters from left, check top edge first: y=900, x = 90 + (900-925) * (-970/-90) = 90 + (-25) * 10.778 = -179.44 (outside) -->
    <!--   So enters at left edge: x=40, y = 925 + (40-90) * (-90/-970) = 925 + (-50) * 0.0928 = 920.36 -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#9333ea;stroke-width:1.5px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:0.6;stroke-dasharray:4,4"
       d="M 960,1005.7216 140,929.63918"
       id="path312"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g298"
       inkscape:connection-end="#g232"
       marker-end="url(#arrow-purple)" />
    
    <!-- To g44 (Embedding): translate(445, 155), width=310, height=20, center=(600, 165), box=[445-755, 155-175] -->
    <!-- Line from (1060, 1015) to (600, 165): dx=-460, dy=-850 -->
    <!-- Exit Weight Update: line goes up-left, exits at top edge y=990 -->
    <!--   x = 1060 + (990-1015) * (-460/-850) = 1060 + (-25) * 0.5412 = 1046.47 -->
    <!-- Enter g44: line enters from top, check bottom edge: y=175, x = 600 + (175-165) * (-460/-850) = 600 + 10 * 0.5412 = 605.41 -->
    <!--   But check if this is within box: 445 <= 605.41 <= 755, yes, so enters at bottom: (605.41, 175) -->
    <path
       style="fill:none;fill-rule:evenodd;stroke:#9333ea;stroke-width:1.5px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:0.6;stroke-dasharray:4,4"
       d="M 1046.4706,990 605.41176,175"
       id="path314"
       inkscape:connector-type="polyline"
       inkscape:connector-curvature="0"
       inkscape:connection-start="#g298"
       inkscape:connection-end="#g44"
       marker-end="url(#arrow-purple)" />
  </g>
</svg>
